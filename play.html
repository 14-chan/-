<!DOCTYPE html>
<html>
<head>
    <title>Siebold Cooking</title>
    <style>
        canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<script>
// ã‚²ãƒ¼ãƒ ã®è¨­å®šã¨å¤‰æ•°
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = 800;
canvas.height = 600;

const fruitSymbols = ["ğŸ", "ğŸ", "ğŸŠ", "ğŸ‹", "ğŸŒ"]; // é€²åŒ–æ®µéšã®ã‚·ãƒ³ãƒœãƒ«
const fruitSize = 40; // ãƒ•ãƒ«ãƒ¼ãƒ„ã®ã‚µã‚¤ã‚º
let fruits = []; // è½ã¡ã‚‹ãƒ•ãƒ«ãƒ¼ãƒ„ã‚’æ ¼ç´ã™ã‚‹é…åˆ—
let player = { x: canvas.width / 2, y: canvas.height - 50, width: 100, height: 20 }; // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
let gravity = 0.5; // é‡åŠ›
let gameSpeed = 5; // ã‚²ãƒ¼ãƒ ã®é€Ÿåº¦ã€ãƒ•ãƒ«ãƒ¼ãƒ„ã®è½ä¸‹é€Ÿåº¦ã‚’åˆ¶å¾¡

// ãƒ•ãƒ«ãƒ¼ãƒ„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
function Fruit(x, y, symbolIndex) {
    this.x = x;
    this.y = y;
    this.symbolIndex = symbolIndex;s
    this.velY = 0;
}

// ã‚­ãƒ£ãƒ³ãƒã‚¹ã«ãƒ•ãƒ«ãƒ¼ãƒ„ã‚’æç”»
Fruit.prototype.draw = function() {
    ctx.font = fruitSize + "px Arial";
    ctx.fillText(fruitSymbols[this.symbolIndex], this.x, this.y);
    this.y += this.velY;
    this.velY += gravity;

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã®è¡çªã‚’ãƒã‚§ãƒƒã‚¯
    if (this.y + fruitSize > player.y && this.x > player.x && this.x < player.x + player.width) {
        this.y = player.y - fruitSize;
        this.velY = 0;
        checkForEvolution(this);
    }

    // ã‚­ãƒ£ãƒ³ãƒã‚¹ã®åº•ã‚’ãƒã‚§ãƒƒã‚¯
    if (this.y + fruitSize > canvas.height) {
        this.y = canvas.height - fruitSize;
        this.velY = -this.velY * 0.7; // ãƒã‚¦ãƒ³ãƒ‰åŠ¹æœ
    }
};

// ãƒ•ãƒ«ãƒ¼ãƒ„ã®é€²åŒ–ã‚’ãƒã‚§ãƒƒã‚¯
function checkForEvolution(fruit) {
    fruits.forEach(otherFruit => {
        if (otherFruit !== fruit && otherFruit.x === fruit.x && otherFruit.y === fruit.y) {
            fruit.symbolIndex++;
            fruits.splice(fruits.indexOf(otherFruit), 1); // ä»–ã®ãƒ•ãƒ«ãƒ¼ãƒ„ã‚’å‰Šé™¤
        }
    });

    if (fruit.symbolIndex >= fruitSymbols.length) {
        fruit.symbolIndex = 0; // æœ€å¤§æ®µéšã«é”ã—ãŸã‚‰æœ€åˆã®æ®µéšã«ãƒªã‚»ãƒƒãƒˆ
    }
}

// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’æç”»
function drawPlayer() {
    ctx.fillRect(player.x, player.y, player.width, player.height);
}

// ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    fruits.forEach(fruit => fruit.draw());
    drawPlayer();
    requestAnimationFrame(update);
}

// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å‹•ãã‚’åˆ¶å¾¡
document.addEventListener("keydown", function(event) {
    if (event.key === "ArrowLeft") player.x -= gameSpeed;
    if (event.key === "ArrowRight") player.x += gameSpeed;
    if (event.key === "Spacebar" || event.key === " ") {
        fruits.push(new Fruit(Math.random() * canvas.width, 0, Math.floor(Math.random() * fruitSymbols.length)));
    }
});

update(); // ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã‚’é–‹å§‹
</script>
</body>
</html>
